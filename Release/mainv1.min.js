function ShowProgressMessage(e){if(console)if("string"==typeof e)console.log(e);else for(var o=0;o<e.length;o++)console.log(e[o]);var n=document.getElementById("progress");if(n){var t="string"==typeof e?e:e.join("<br />");n.innerHTML=t}}function InitiateSpeedDetection(){ShowProgressMessage("Loading the image, please wait..."),window.setTimeout(MeasureConnectionSpeed,1)}function MeasureConnectionSpeed(){function e(){var e=(n-o)/1e3,t=8*downloadSize,i=t/e,a=i/1024,s=a/1024;ShowProgressMessage(["Your connection speed is:",i.toFixed(2)+" bps",a.toFixed(2)+" kbps",s.toFixed(2)+" Mbps"])}var o,n,t=new Image;t.onload=function(){n=(new Date).getTime(),e()},t.onerror=function(e,o){ShowProgressMessage("Invalid image, or error downloading")},o=(new Date).getTime();var i="?nnn="+o;t.src=imageAddr+i}var imageAddr="https://jdc20181.github.io/testpics/winter-fog-1323462087o5i.jpg",downloadSize=584e3;window.addEventListener?window.addEventListener("load",InitiateSpeedDetection,!1):window.attachEvent&&window.attachEvent("onload",InitiateSpeedDetection);
var div=document.createElement("div"),style=document.createElement("style");div.innerHTML='<div style="opacity: 0.5;   color: BLACK;position: fixed; top: auto; bottom:50%; left: 80%;"> <a href="https://github.com/jdc20181/SpeedTest">Powered By SpeedTest</a></div>',document.body.appendChild(div);var css=document.createElement("style");css.type="text/css",css.innerHTML="a:link,a:visited{opacity:0.5;color:black;text-decoration:none}a:active,a:hover{text-decoration:none opacity: 0.5;color:black;}",document.body.appendChild(css);
