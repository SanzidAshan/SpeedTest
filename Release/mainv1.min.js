function ShowProgressMessage(e){if(console)if("string"==typeof e)console.log(e);else for(var o=0;o<e.length;o++)console.log(e[o]);var t=document.getElementById("progress");if(t){var n="string"==typeof e?e:e.join("<br />");t.innerHTML=n}}function InitiateSpeedDetection(){ShowProgressMessage("Loading the image, please wait..."),window.setTimeout(MeasureConnectionSpeed,1)}function MeasureConnectionSpeed(){function e(){var e=(t-o)/1e3,n=8*downloadSize,i=n/e,a=i/1024,d=a/1024;ShowProgressMessage(["Your connection speed is:",i.toFixed(2)+" bps",a.toFixed(2)+" kbps",d.toFixed(2)+" Mbps"])}var o,t,n=new Image;n.onload=function(){t=(new Date).getTime(),e()},n.onerror=function(e,o){ShowProgressMessage("Invalid image, or error downloading")},o=(new Date).getTime();var i="?nnn="+o;n.src=imageAddr+i}var div=document.createElement("div"),style=document.createElement("style");div.innerHTML='<div style="opacity: 0.5;   color: BLACK;position: fixed; top: auto; bottom:50%; left: 80%;"> <a href="https://github.com/jdc20181/SpeedTest">Powered By Example</a></div>',document.body.appendChild(div);var css=document.createElement("style");css.type="text/css",css.innerHTML="a:link,a:visited{opacity:0.5;color:black;text-decoration:none}a:active,a:hover{text-decoration:none opacity: 0.5;color:black;}",document.body.appendChild(css);var imageAddr="https://jdc20181.github.io/testpics/winter-fog-1323462087o5i.jpg",downloadSize=584e3;window.addEventListener?window.addEventListener("load",InitiateSpeedDetection,!1):window.attachEvent&&window.attachEvent("onload",InitiateSpeedDetection);
