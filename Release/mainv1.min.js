function ShowProgressMessage(a){if(console)if("string"==typeof a)console.log(a);else for(var b=0;b<a.length;b++)console.log(a[b]);var c=document.getElementById("progress");if(c){var d="string"==typeof a?a:a.join("<br />");c.innerHTML=d}}function InitiateSpeedDetection(){ShowProgressMessage("Loading the image, please wait..."),window.setTimeout(MeasureConnectionSpeed,1)}function MeasureConnectionSpeed(){function e(){var c=(b-a)/1e3,d=8*downloadSize,e=d/c,f=e/1024,g=f/1024;ShowProgressMessage(["Your connection speed is:",e.toFixed(2)+" bps",f.toFixed(2)+" kbps",g.toFixed(2)+" Mbps"])}var a,b,c=new Image;c.onload=function(){b=(new Date).getTime(),e()},c.onerror=function(a,b){ShowProgressMessage("Invalid image, or error downloading")},a=(new Date).getTime();var d="?nnn="+a;c.src=imageAddr+d}var div=document.createElement("div"),style=document.createElement("style");div.innerHTML='<div style="opacity: 0.5;   color: BLACK;position: fixed; top: auto; bottom:50%; left: 80%;"> <a href="https://github.com/jdc20181/SpeedTest">Powered By Example</a></div>',document.body.appendChild(div);var css=document.createElement("style");css.type="text/css",css.innerHTML="a:link,a:visited{opacity:0.5;color:black;text-decoration:none}a:active,a:hover{text-decoration:none opacity: 0.5;color:black;}",document.body.appendChild(css);var imageAddr="https://jdc20181.github.io/testpics/winter-fog-1323462087o5i.jpg",downloadSize=584e3;window.addEventListener?window.addEventListener("load",InitiateSpeedDetection,!1):window.attachEvent&&window.attachEvent("onload",InitiateSpeedDetection);
